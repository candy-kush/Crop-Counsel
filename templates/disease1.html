<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Disease Detection</title>
    <link rel="icon" type="image/png" sizes="32x32" href="../static/crop_soil/favicon.ico">

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">

        <style>
            h1 {
                color: rgb(121, 239, 174);
                text-align: center;
            }
    
            .warning {
                color: red;
                font-weight: bold;
                text-align: center;
            }
            .card{
                margin-left:410px;
                margin-top: 20px;
                color: rgb(211, 255, 199);
            }
            .container{
                background:#f7f7f1;
                font-weight: bold;
                padding: 20px;
                border-radius: 8px;
                margin-top: 14rem;
            }
    
            .weather-img {
                background: #88aaff;
            }
    
        </style>

	<!-- Font and Box Icon CSS -->
	<link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

	<link rel="stylesheet" href="../static/css/disease.css">
</head>

<body>
	
    <header class="header">
        <a href="/" class="logo"> Crop <span class="counsel">Counsel</span> </a>
        <div class="navLinks">
            <button class="hamburger" id="hamburger">
                <i class='bx bx-menu' id="menu-icon"></i>
            </button>
            <nav class="navbar" id="navbar">
                <a href="#home" class="active"> Home </a>
                <a href="#services"> Services </a>
                <a href="#contact"> Contact </a>
            </nav>
        </div>
    </header>

    <div class="container" id="header">
		<h1 class="text-success">Disease Detection</h1>
        
        <form class="form-signin" method=post enctype=multipart/form-data>
            <div class="row">
                <label>Image of the Leaf</label>
				<div class="col-md-3 content">
                    <span id='button' class="input-file">Select File</span>
                    <!-- <span id='val'></span> -->
                    <div>
                        <input type="file" name="file" class="form-control-file old-input" id="new-image" onchange="preview_image(event)">
                    </div>
                    <img id="input-image" src="" alt="Disease" height="150" width="150"/>
				</div>
			</div>

            <div class="getCrop">
				<div class="">
					<button type="submit" onclick="handleClick(event)" class="btn">Get Crop</button>
				</div>
			</div>
        </form>

		{% if prediction %}
		<div class="result-heading">
			<h2>Predicted Disease</h2>
		</div>
		<div class="result">
            <p id="predictedDisease" class="card-text">{{ prediction }}</p>
            <img src="../static/new_data/{{file}}" alt="">
		</div>
		{% endif %}

	</div>
    
    <!-- Footer -->
    <footer class="footer">

        <div class="footer-iconTop">
            <a href="#header"><i class='bx bx-up-arrow-alt'></i></a>
        </div>

        <div class="footer-text">
            <p>Copyright &copy; 2023 by Team Crop Counsel | All rights reserved.</p>
        </div>

    </footer>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous">

    </script>

    <script type="text/javascript">
        var currImg = document.getElementById("input-image");
        var newImg = document.getElementById("new-image");


        newImg.onchange = function(event) {
            currImg.src = URL.createObjectURL(newImg.files[0]);
            currImg.setAttribute("style", "visibility: visible;");
        }

        $('#button').click(function(){
        $("input[type='file']").trigger('click');
        })

        function preview_image(event) {
            event.preventDefault();
            var reader = new FileReader();
            reader.onload = function () {
                var output = document.getElementById('input-image')
                output.src = reader.result;
            }
            reader.readAsDataURL(event.target.files[0]);
        }

    </script>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
    crossorigin="anonymous"></script>

    <script src="../static/script/script.js"></script>
</body>
</html>